#include "cv_utils.h"

#include <opencv2/core/core.hpp>
#include <vector>

using namespace std;
using namespace cv;

namespace cv_utils
{
  template<typename Func> Mat drawValuesOnImage(const vector<double> &values, const int IMAGE_WIDTH, const int IMAGE_HEIGHT, const Func &func)
  {
    Mat image(IMAGE_HEIGHT, IMAGE_WIDTH, CV_8UC1);
    for (int y = 0; y < IMAGE_HEIGHT; y++) {
      for (int x = 0; x < IMAGE_WIDTH; x++) {
	int color = round(func(values[y * IMAGE_WIDTH + x]));
	image.at<uchar>(y, x) = max(min(color, 255), 0);
      }
    }
    return image;
  }
}
